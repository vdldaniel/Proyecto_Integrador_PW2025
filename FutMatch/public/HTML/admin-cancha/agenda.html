<!--
Manejo de la agenda del Admin de Cancha:
- FILTRA POR CANCHA (debe seleccionar una cancha para ver su agenda)
- Ver la agenda de reservas de la cancha
- Vista semanal y diaria
- PUEDE APARECER SOLICITUDES PENDIENTES DE APROBACIÓN EN LOS DIAS CORRESPONDIENTES
- Vista mensual (contador de lugares libres)
- Filtrar por fecha
- Ver detalles de cada reserva
- Redirige a editar reserva
- Botón para crear nueva reserva
- Botón para volver al panel de administración
- Botón para cerrar sesión
-->


<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <base href="/Proyecto_Integrador_PW2025/FutMatch/" />
  
  <title>FutMatch</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="public/assets/css/bootstrap.min.css" />
  
  <!-- Iconos de Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />

  <!-- Tipografía -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet" />

  <!-- Estilos de la agenda -->
  <link rel="stylesheet" href="src/styles/style-agenda.css" />

</head>

<body class="light-page monthly-view-active">
  <!-- Barra superior -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
    <div class="container-fluid">
      <!-- Lado izquierdo: menú hamburguesa + título -->
      <div class="d-flex align-items-center">
        <button class="btn btn-outline-secondary me-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu">
          <i class="bi bi-list"></i>
        </button>
        <span class="navbar-brand mb-0 h2">AGENDA</span>
      </div>

      <!-- Centro: botón hoy + selector de fecha -->
      <div class="d-flex justify-content-sm-end justify-content-md-center align-items-center mx-auto">
        <button id="todayBtn" class="btn btn-outline-primary me-2" type="button">Hoy</button>
        <input type="date" class="form-control" 
               id="dateSelector">
      </div>

      <!-- Lado derecho: configuración + selector de vista -->
      <div class="d-none d-md-flex align-items-center"> <!-- Solo visible en pantallas medianas y grandes -->
        <button id="btn-configuracion" class="btn btn-outline-secondary me-2" type="button">
          <i class="bi bi-gear"></i>
        </button>
        <div class="dropdown">
          <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-calendar-week me-1"></i>Vista
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item view-selector" type="button" data-view="month">Mensual</a></li>
            <li><a class="dropdown-item view-selector" type="button" data-view="week">Semanal</a></li>
            <li><a class="dropdown-item view-selector" type="button" data-view="day">Diaria</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Menú lateral deslizable -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarMenuLabel">Menú</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <!-- Selector de cancha -->
      <div class="mb-3">
        <label for="canchaSelect" class="form-label fw-semibold">Seleccionar Cancha</label>
        <select class="form-select" id="canchaSelect">
          <option selected>Seleccione una cancha...</option> <!-- Datos fijos hasta conectar con backend -->
          <option value="1">Cancha A - Fútbol 11</option>
          <option value="2">Cancha B - Fútbol 7</option>
          <option value="3">Cancha C - Fútbol 5</option>
        </select>
      </div>

      <hr>

      <!-- Botones de acción -->
      <div class="d-grid gap-2">
        <button id="crearReservaBtn" class="btn btn-success" type="button">
          <i class="bi bi-plus-circle me-2"></i>Crear reserva
        </button>
        <button id="gestionarSolicitudesBtn" class="btn btn-warning position-relative" type="button">
          <i class="bi bi-clock-history me-2"></i>Gestionar solicitudes
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
            3
            <span class="visually-hidden">Solicitudes pendientes</span>
          </span>
        </button>
      </div>

      <!-- Opciones de vista para móviles -->
      <div class="d-md-none"> <!-- Solo visible en pantallas pequeñas -->
        <h6 class="fw-semibold">Vista</h6>
        <div class="d-grid gap-2 mb-3">
          <button class="btn btn-outline-secondary view-selector" data-view="month">Mensual</button>
          <button class="btn btn-outline-secondary view-selector" data-view="week">Semanal</button>
          <button class="btn btn-outline-secondary view-selector" data-view="day">Diaria</button>
        </div>
        <button id="btn-configuracion" class="btn btn-outline-secondary w-100" type="button">
          <i class="bi bi-gear me-2"></i>Configuración
        </button>
      </div>
    </div>
  </div>

  <!-- Área principal del calendario -->
  <div class="main-container">
    <div class="container-fluid h-100">
      <div class="row h-100 p-1 p-sm-1 p-md-3 p-lg-4">
        <main class="col-12 d-flex flex-column">
          <!-- Encabezado con fecha y navegación -->
          <div class="d-flex justify-content-between align-items-center mb-3 date-header">
            <h3 id="currentDateDisplay" class="mb-0">Septiembre 2025</h3> <!-- Se actualiza con updateDateDisplay() en agenda.js -->
            <div class="btn-group calendar-navigation" role="group" aria-label="Navigate calendar">
              <button type="button" class="btn btn-outline-secondary" id="prevBtn">
                <i class="bi bi-chevron-left"></i> <!-- Ir al período anterior -->
              </button>
              <button type="button" class="btn btn-outline-secondary" id="nextBtn">
                <i class="bi bi-chevron-right"></i> <!-- Ir al período siguiente -->
              </button>
            </div>
          </div>

        <!-- Contenido del calendario -->
        <div id="calendarContent" class="d-flex flex-column flex-grow-1">
          <!-- Vista mensual -->
          <div id="monthView" class="calendar-view d-flex flex-column">
            <div class="table-responsive flex-grow-1">
              <table class="table table-bordered h-100">
                <thead class="table-light">
                  <tr>
                    <th scope="col">Dom</th>
                    <th scope="col">Lun</th>
                    <th scope="col">Mar</th>
                    <th scope="col">Mié</th>
                    <th scope="col">Jue</th>
                    <th scope="col">Vie</th>
                    <th scope="col">Sáb</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Se llena con renderMonthView() en agenda.js -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Vista semanal -->
          <div id="weekView" class="calendar-view d-none">
            <div class="table-responsive">
              <table class="table table-bordered">
                <thead class="table-light">
                  <tr>
                    <th scope="col" width="100">Hora</th>
                    <th scope="col">Dom</th>
                    <th scope="col">Lun</th>
                    <th scope="col">Mar</th>
                    <th scope="col">Mié</th>
                    <th scope="col">Jue</th>
                    <th scope="col">Vie</th>
                    <th scope="col">Sáb</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Se llena con renderWeekView() en agenda.js -->
                </tbody>
              </table>
            </div>
          </div>

          <!-- Vista diaria -->
          <div id="dayView" class="calendar-view d-none">
            <div class="row">
              <div class="col-md-8">
                <div class="table-responsive">
                  <table class="table table-bordered">
                    <thead class="table-light">
                      <tr>
                        <th scope="col" width="100">Hora</th>
                        <th scope="col" id="dayViewHeader">Día</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Se llena con renderDayView() en agenda.js -->
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card">
                  <div class="card-header">
                    <h6 class="mb-0">Resumen del día</h6>
                  </div>
                  <div class="card-body">
                    <!-- Se llena con updateDaySummary() en agenda.js -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!--MODALES-->
  <div class="modal" id="crearReservaModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Crear reserva</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Modal body text goes here.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>  

  <!-- Scripts de JavaScript -->
  <script src="public/assets/js/bootstrap.bundle.min.js"></script>
  <script src="src/scripts/pages/agenda.js"></script>
</body>
</html>



